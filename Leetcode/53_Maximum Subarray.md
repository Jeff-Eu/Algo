# 53. Max Sum Contiguous Subarray
Given an integer array nums, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum.

Example:
```
Input: [-2,1,-3,4,-1,2,1,-5,4],
Output: 6
Explanation: [4,-1,2,1] has the largest sum = 6.
```

Follow up:\
If you have figured out the O(n) solution, try coding another solution using the divide and conquer approach, which is more subtle.

# 思路
這題的觀念屬於困難等級，利用到Dynamic Programming的技巧，屬於大師解題，說明如[Wikipedia](https://en.wikipedia.org/wiki/Maximum_subarray_problem)(2020/1/27 update: wiki更新後無論中英文在講解這演算法都很不清楚，直接看虛擬碼會省很多時間)。但這題在面試時也常被拿來考，且Leetcode上答對人數有39.4%，不得不做先理解及記憶。

說明：這裡表示的A[j]是代表在A陣列的第j個元素。
解這題的演算法會需要儲存兩種max值，一個是局部max(命名為m)，一個是絕對max(命名為M)，以數列A[1...n]來說明，演算法會從最左邊開始掃描，A[1...j], j=1，接下來才是j=2，<u>局部max指是結尾在j的最大子陣列</u>，每次找到m再去更新M。為何要找局部max？以掃描到第j個為例，它是結尾在j的最大子陣列，那下次掃描進到j+1時，我們要看看包含了j+1的新可能子陣列(<u>同時也是結尾在j+1</u>)，是不是能找到新的絕對max，但是要包含j+1的子陣列除了它自己，也需考慮跟它相連也必包含第j的子陣列，結尾在j+1的子陣列最大的只有可能是 A[j+1] 與 m + A[j+1]，你可能會懷疑為什麼會有 m + A[j+1]？ 因為m已經是 A[1...j]結尾在第j中，最大的子陣列了，會跟A[j+1]相連的子陣列若不為空，最大的只有它。

# 面試資訊
* 面試出題:
    * 美商 Arlo Technologies
    * Facebook, Yahoo, PayPal, M$, LinkedIn

# Solution

Java
```java
class Solution {
    public int maxSubArray(int[] nums) {

        int end = nums[0];
        int max = end;

        for(int i=1; i<nums.length; i++) {

            end = Math.max(nums[i], end + nums[i]);
            max = Math.max(max, end);
        }

        return max;
    }
}
```

Python
```python
class Solution:
    # @param A : tuple of integers
    # @return an integer
    def maxSubArray(self, nums):
        max_ending_here = max_so_far = nums[0]
        # Python: What does for x in A[1:] mean?
        #   https://stackoverflow.com/a/44341431/1613961
        for x in nums[1:]:
            max_ending_here = max(x, max_ending_here + x)
            max_so_far = max(max_so_far, max_ending_here)
        return max_so_far

# 短寫法
class Solution(object):
    def maxSubArray(self, nums):

        M = m = nums[0]

        for a in nums[1:]:
            m = max(a, m + a)
            M = max(M, m)
        return M

nums = [ -37, -450, -340, 79, -148, -306, -212, -373, -41, -260, 26, -295, -48, -84, -481, -225, -487, -484, -359, -485, -274, -465, -206, -90, -168, -488, -338, -192, -449, -156, -151, 28, -121, 93, 34, -152, -266, 12, -454, -41, -125, -311, -388, -215, -262, -182, -449, -30, -336, -330, -54, -349, 27, 18, -100, -215, -76, -275, -170, -48, -404, -157, 6, -21, -456, 0, -203, 75, -111, -87, -54, -264, -489, -340, -288, -291, -115, -437, -22, -454, -467, -161, -499, -313, -410, -276, -90, -125, -108, -367, -400, -74, 47, -401, -166, -419, 82, -437, 28, 40, 25, -121, 23, -433, 43, 34, -144, -51, -309, -147, -310, -172, -33, 72, 83, -423, -259, -373, -54, -450, -318, -357, -200, -179, -330, -486, -55, -427, -474, -163, 23, -437, -323, -394, -39, 52, -416, -498, -174, -405, -130, -223, -388, -452, -423, -144, -317, -405, -335, -470, -304, -441, -246, -415, 16, 31, -269, -407, -412, 54, -416, 84, -241, 14, -296, -234, -216, -384, -106, -361, -317, -182, -344, -441, -49, -281, 1, 53, -407, 35, -31, -120, -488, -198, 77, -300, -494, 41, -315, -232, -11, -221, -484, 60, -342, -402, -352, 94, -473, -269, -302, -439, -467, -427, -9, -66, -379, -278, -34, -95, -404, -491, -260, -392, -5, -177, -268, -362, -299, -207, -235, -127, -305, -448, -310, -392, -338, -382, -73, -225, -22, 81, -267, 88, -445, -89, -247, -114, -368, -429, -280, -110, -141, -296, -257, -387, 9, -344, -96, -451, -365, -178, -149, -233, -487, -414, 47, -431, -19, -312, 42, -188, -370, -282, 27, -336, -255, -474, -71, -412, -28, -224, -147, -259, -323, -406, -368, -112, 88, -336, -475, -101, -375, -317, -166, -493, -261, -38, -225, -385, -452, 24, -355, -57, -385, -338, -129, -83, -384, -278, -162, 25, -232, -324, -334, -18, -299, -454, -111, -265, -493, -210, -349, -17, -211, -347, -211, -300, -308, -257, -372, -48, -157, -91, -430, -53, -369, -448, -158, -422, -459, -349, 7, -275, -340, 2, -103, -268, -499, -64, -46, 28, -93, -226, -108, -78, -141, -66, -481, -139, -402, -448, -383, -260, 17, 9, -401, -327, -453, -334, -12, -170, -221, -22, -347, -53, -323, 31, -87, -406, 100, 76, -384, -247, -440, -180, -289, -125, -219, -459, 87, -401, -438, -308, -369, -308, -123, -186, 38, 37, -405, -137, -291, -138, -49, -119, -342, -376, -469, 2, -187, -43, 41, -304, -71, -101, -26, 36, -96, -72, -287, -484, -331, -139, -239, -248, -104, -51, -225, -363, -100, -365, 94, -288, -324, -36, -216, 9, -387, -234, -204, -363, -304, -221, -8, -10, -375, -136, 95, -340, -382, -232, -96, -298, -211, 91, -67, -49, -189, -43, 73, -254, -346, -498, -443, -268, -207, -143, -297, -332, -269, -187, -91, -11, 57, -480, -434, -218, 76, -495, -245, 57, -250, -316, -192, -12, -157, -475, 26, -44, -395, 17, 11, -389, 91, -433, -75, -133, 64, -100, -383, -266, -158, -249, 56, -140, -389, -275, -470, -66, -42, -275, 7, -170, -71, -154, -482, -364, -379, -19, -121, 42, 45, -202, -26, -51, -68, -256, -407, 65, -262, 18, -226, -137, -31, 87, 11, -109, -85, -336, -80, -452, -160, -37, -477, -125, -90, -486, 21, -401, 65, -289, -72, 29, -430, -210, -491, -64, 64, -149, -311, 23, -212, -314, -45, -498, -319, 88, -298, -189, 82, 79, 25, -380, -12, -388, 18, 76, -463, -387, -456, -299, -449, -271, -28, -9, 42, -247, -75, 7, -103, -212, -52, -246, 35, -247, -275, -216, -127, -63, 29, -166, -482, 16, -31, -406, -457, -394, -296, -138, -109, 84, -59, -117, -182, -20, 4, -260, -420, -286, -129, -131, -402, -87, -199, -87, -362, 45, -39, -250, -47, -65, -276, 99, -411, -266, -434, -348, -61, -283, -62, -237, -59, -151, -333, -108, -309, -322, -394, -44, -222, -455, -464, -141, -7, -358, -314, 92, -208, -58, -357, -448, -397, -9, -148, -141, -495, 38, 13, -465, -20, -113, 63, -392, -218, -184, 5, -219, -458, -248, -444, 82, -74, -393, -63, -15, -175, -429, -457, -288, -381, -344, -329, -326, -117, -108, -432, -418, 70, -3, 87, -112, 91, -451, -54, -134, -288, -168, -64, -437, -481, -390, -96, -439, -153, -50, -76, -196, -176, -159, -330, -462, -16, -482, 52, -43, -485, -500, -326, -2, -271, 8, -260, -18, -420, -316, -291, 83, -489, -324, -241, -107, 8, -457, -221, -302, 5, -399, -218, -91, -113, -302, -146, -473, -402, -2, -494, -120, -88, -417, -121, -249, -473, -402, -154, -255, -98, 45, -492, -423, -315, 19, -188, -62, -301, -108, -251, -467, -332, 20, -349, 88, -48, -365, 58, -331, -372, -205, -34, 78, -393, 39, -232, -418, -44, -155, -92, -140, -275, 20, -130, -65, 69, -430, -244, -222, -101, -366, -149, -159, 41, -151, -49, -36, -206, -153, -152, -140, -206, -142, 55, -477, -481, 17, 34, 88, -212, -84, -172, -390, -260, -198, 65, -425, -146, -38, 29, -488, -159, -478, -194, -173, -194, -253, 90, -76, -153, -397, 84, 50, -432, 86, -435, -218, -343, -161, -353, -171, -466, -410, -42, -31, 86, -281, -132, -6, 51, -474, -495, -324, 37, -402, -422, -309, -280, -223, -38, -352, -270, -464, -403, 67, -179, -209, 7, -314, -308, -182, 71, -251, -330, -437, -362, -233, 2, -41, -360, -228 ]
# A = [-2,1,-3,4,-1,2,1,-5,4]
s = Solution()

print s.maxSubArray(nums)
```